---
import BlockRendererInner from "./BlockRenderer.astro";
import Navigation from "./Navigation.astro";
import NavigationLink from "./NavigationLink.astro";
import NavigationSubmenu from "./NavigationSubmenu.astro";
import Cover from "./Cover.astro";
import Heading from "./Heading.astro";
import { getBlockStyling } from "@wp-block-tools/styles";
import type { Block } from "@wp-block-tools/styles";
import { Image } from "astro:assets";
type Props = {
  blocks: Block[];
};
const { blocks } = Astro.props;
---

{
  blocks.map((block) => {
    const { styles, classes } = getBlockStyling(block);
    switch (block.name) {
      case "core/heading":
        return (
          <Heading
            level={block?.attributes?.level || 2}
            content={block?.attributes?.content || ""}
            classes={classes}
            styles={styles}
          />
        );
      case "core/cover":
        return (
          <Cover
            classes={classes}
            styles={styles}
            url={block?.attributes?.url}
            width={block?.attributes?.width}
            height={block?.attributes?.width}
          >
            <BlockRendererInner blocks={block?.innerBlocks || []} />
          </Cover>
        );
      case "core/navigation-submenu":
        return (
          <NavigationSubmenu
            classes={classes}
            styles={styles}
            label={block?.attributes?.label || ""}
            url={block?.attributes?.url || ""}
          >
            <BlockRendererInner blocks={block?.innerBlocks || []} />
          </NavigationSubmenu>
        );
      case "core/navigation-link":
        return (
          <NavigationLink
            classes={classes}
            styles={styles}
            label={block?.attributes?.label || ""}
            url={block?.attributes?.url || ""}
          />
        );
      case "core/navigation":
        return (
          <Navigation classes={classes} styles={styles}>
            <BlockRendererInner blocks={block?.innerBlocks || []} />
          </Navigation>
        );
      case "core/paragraph":
        return (
          <p
            class={classes}
            style={styles}
            set:html={block?.attributes?.content}
          />
        );
      case "core/column":
      case "core/columns":
      case "core/post-content":
      case "core/group":
        return (
          <div class={classes} style={styles}>
            <BlockRendererInner blocks={block?.innerBlocks || []} />
          </div>
        );
      case "core/template-part":
        return <BlockRendererInner blocks={block?.innerBlocks || []} />;
      case "core/site-logo":
        return (
          <div class={classes} style={styles}>
            <Image
              width={block?.attributes?.width || "48px"}
              height={block?.attributes?.width || "48px"}
              src={block?.attributes?.url || ""}
              alt={block?.attributes?.alt || "Site Logo"}
            />
          </div>
        );
      default:
        return null;
    }
  })
}
